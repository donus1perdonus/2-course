fork https://github.com/ScarletSurge/mp_os